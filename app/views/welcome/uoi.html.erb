<% if @transactions %>
		<% @transactions.each do |t| %>
			<div class="transaction_container">
				<div class="transaction_box">
					<img src="<%= t['BPicture'] %>" class="transaction_pic" />
					<div class="transaction_details">
						<b><%= t["First_Name_B"] + ' ' + t["Last_Name_B"] %></b> owes you
						<div class="amount">
							<%= t["Currency_Symbol"] %><%= t["Amount"] %> (<%= t["Currency_Name"] %>)
						</div>
						<a href="#" class="more_options"></a>
					</div>
					<div class="options" style="display:none">
						<div class="transaction_description">
							<h1>Description</h1>
							<%= t["Description"] %>
						</div>
						<h1>Status</h1>
						Requested on <%= Date.parse("2012-03-06 00:00:00 UTC").strftime("%d-%m-%Y") %>
						<a href="/welcome/paidback/<%= t['ID'] %>" class="paidback_button">Paidback</a>
						<a href="#" data-id=<%= t['ID'] %> class="reject_button delete-confirm" >Delete</a>
					</div>
				</div>
			</div>		<% end %>
<% else %>
	No one owes you money
<% end %>

<p>
	<a href="/welcome/home">Go back home</a>
</p>

<%= javascript_include_tag "vex.combined.min.js", "data-turbolinks-track" => true %>
<script>vex.defaultOptions.className = 'vex-theme-os';</script>
<%= stylesheet_link_tag    "vex", media: "all", "data-turbolinks-track" => true %>
<%= stylesheet_link_tag    "vex-theme-os", media: "all", "data-turbolinks-track" => true %>

<script>
	$(document).ready(function () {
	    $(".transaction_details").click( function(e) {
	    	e.preventDefault();
	    	var arrow = $(this).children(".more_options");
	        var box = $(this).siblings(".options");
	        $(box).slideToggle(function () {
	            if ($(box).is(":visible")) {
	                $(arrow).css("background-image", "url(http://i.imgur.com/iqVwIpT.png)");
	            } else {
	                $(arrow).css("background-image", "url(http://i.imgur.com/xk7c9PB.png)");
	            }
	        });
	    });

	    $(".delete-confirm").click( function() {
	    	var t = $(this);
	    	vex.dialog.confirm({
				message: 'Are you sure you want to delete this transaction?',
				callback: function(value) {
					if (value) {
						window.location.replace("/welcome/delete_transaction/" + t.data("id"));
					}
				}
			});
	    })
	
	});
</script>