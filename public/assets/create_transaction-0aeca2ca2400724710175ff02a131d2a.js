function build_selected_user(e){var t='<div class="selected_user_container">';t+='<img src="'+e.profile_picture+'" width="30px">',t+='<div class="selected_user_content">'+e.full_name+"</div>",t+='<div class="selected_user_delete" data-id='+e.id+">",t+='<i class="fa fa-times"></i></div>',t+="</div>",$("#selected_users").append(t)}var users_selected={},transaction_date=$(".datepicker").datepicker({}).on("changeDate",function(){transaction_date.hide()}).data("datepicker"),substringMatcher=function(e){return function(t,s){var a;a=[],substrRegex=new RegExp(t,"i"),$.each(e,function(e,t){substrRegex.test(t.first_name+" "+t.last_name)&&a.push({value:t,full_name:t.first_name+" "+t.last_name,id:t.id,profile_picture:t.profile_picture,email_address:t.email_address})}),s(a)}};$(" .typeahead").typeahead({hint:!0,highlight:!0,minLength:1},{name:"all_users",displayKey:"full_name",source:substringMatcher(all_users),templates:{empty:["sorry nothing available"].join("\n"),suggestion:Handlebars.compile('<img class="profile_pic" src="{{ profile_picture }}">{{ full_name }}')}}).on("typeahead:selected",function(e,t){$(".typeahead").val(""),users_selected[t.id]||(users_selected[t.id]=t,build_selected_user(t))}),$(".typeahead").focus(function(){}).blur(function(){$(this).val("")}),$("#selected_users").on("click",".selected_user_delete",function(){var e=parseInt($(this).data("id"));delete users_selected[e],$(this).parent().remove()}),$("#create_transaction").validate({rules:{Amount:{required:!0,number:!0},Date:"required",Description:{maxlength:255}},submitHandler:function(){var e={BorrowerKey:users_selected,Amount:$("input[name=Amount]").val(),Date:$("input[name=Date]").val(),Description:$("input[name=Description]").val()};return $.ajax({type:"POST",url:"/transaction/post",dataType:"json",data:e,success:function(){console.log("SUCCESS"),$("#create_transaction").slideUp(function(){$("#success").slideDown()})},error:function(){alert("An error has occured")}}),!1}});